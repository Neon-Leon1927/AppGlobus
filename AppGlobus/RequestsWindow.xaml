<Window x:Class="AppGlobus.RequestsWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:AppGlobus"
        mc:Ignorable="d"
        Title="Управление заявками"
        Height="700"
        Width="1000"
        WindowStartupLocation="CenterScreen">
    <Grid Margin="10">
        <Grid.RowDefinitions>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="Auto"/>
            <RowDefinition Height="*"/>
            <RowDefinition Height="Auto"/>
        </Grid.RowDefinitions>

        <!-- Заголовок -->
        <TextBlock Grid.Row="0"
               Text="Управление заявками"
               FontSize="20"
               FontWeight="Bold"
               Margin="0,0,0,10"/>

        <!-- Панель управления -->
        <StackPanel Grid.Row="1" 
                Orientation="Horizontal" 
                Margin="0,0,0,10">
            <Button x:Name="btnAddRequest"
                Content="➕ Добавить"
                Width="100"
                Height="30"
                Click="BtnAddRequest_Click"
                Visibility="Visible"/>
            <Button x:Name="btnEditRequest"
                Content="✏️ Редактировать"
                Width="120"
                Height="30"
                Margin="10,0,0,0"
                Click="BtnEditRequest_Click"
                IsEnabled="False"/>
            <Button x:Name="btnDeleteRequest"
                Content="🗑️ Удалить"
                Width="100"
                Height="30"
                Margin="10,0,0,0"
                Click="BtnDeleteRequest_Click"
                IsEnabled="False"
                Visibility="Visible"/>
            <Button x:Name="btnRefresh"
                Content="🔄 Обновить"
                Width="100"
                Height="30"
                Margin="10,0,0,0"
                Click="BtnRefresh_Click"/>
            <Button x:Name="btnBack"
                Content="← Назад"
                Width="80"
                Height="30"
                Margin="10,0,0,0"
                Click="BtnBack_Click"/>
        </StackPanel>

        <!-- Список заявок (убрали столбцы с именем клиента) -->
        <DataGrid x:Name="dgRequests"
      Grid.Row="2"
      AutoGenerateColumns="False"
      CanUserAddRows="False"
      SelectionMode="Single"
      SelectionChanged="DgRequests_SelectionChanged"
      IsReadOnly="True">
            <DataGrid.Columns>
                <DataGridTextColumn Header="Код заявки"
                        Binding="{Binding Id}"
                        Width="80"/>
                <DataGridTextColumn Header="Код тура"
                        Binding="{Binding TourId}"
                        Width="70"/>
                <DataGridTextColumn Header="Название тура"
                        Binding="{Binding TourName}"
                        Width="200"/>
                <DataGridTextColumn Header="Код клиента"
                        Binding="{Binding ClientId}"
                        Width="80"/>
                <DataGridTextColumn Header="Дата заявки"
                        Binding="{Binding RequestDate, StringFormat=dd.MM.yyyy}"
                        Width="90"/>
                <DataGridTextColumn Header="Статус"
                        Binding="{Binding Status}"
                        Width="100">
                    <DataGridTextColumn.ElementStyle>
                        <Style TargetType="TextBlock">
                            <Setter Property="HorizontalAlignment" Value="Center"/>
                            <Setter Property="Padding" Value="4"/>
                            <Style.Triggers>
                                <DataTrigger Binding="{Binding Status}" Value="Подтверждена">
                                    <Setter Property="Background" Value="#4CAF50"/>
                                    <Setter Property="Foreground" Value="White"/>
                                    <Setter Property="FontWeight" Value="Bold"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding Status}" Value="Ожидает">
                                    <Setter Property="Background" Value="#FF9800"/>
                                    <Setter Property="Foreground" Value="White"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding Status}" Value="Отменена">
                                    <Setter Property="Background" Value="#F44336"/>
                                    <Setter Property="Foreground" Value="White"/>
                                </DataTrigger>
                                <DataTrigger Binding="{Binding Status}" Value="Выполнена">
                                    <Setter Property="Background" Value="#2196F3"/>
                                    <Setter Property="Foreground" Value="White"/>
                                </DataTrigger>
                            </Style.Triggers>
                        </Style>
                    </DataGridTextColumn.ElementStyle>
                </DataGridTextColumn>
                <DataGridTextColumn Header="Кол-во чел."
                        Binding="{Binding PeopleCount}"
                        Width="70"/>
                <!-- УДАЛИЛИ столбец Стоимость -->
                <DataGridTextColumn Header="Комментарий"
                        Binding="{Binding Comment}"
                        Width="*"/>
            </DataGrid.Columns>
        </DataGrid>


        <!-- Статус -->
        <StatusBar Grid.Row="3">
            <StatusBarItem>
                <TextBlock x:Name="txtStatus" Text="Готово"/>
            </StatusBarItem>
            <StatusBarItem HorizontalAlignment="Right">
                <TextBlock x:Name="txtRequestsCount" Text="0"/>
            </StatusBarItem>
        </StatusBar>
    </Grid>
</Window>
